description "apertium-apy gateway init script"

start on starting apertium-all
stop on stopped apertium-all
respawn
respawn limit 50 300   # try to respawn 50 times in 300 seconds (5 minutes)

env CONFIG=/etc/default/apertium

script
	. $CONFIG
	python3 $APYPATH/apertium_apy/gateway.py $SERVERLIST
end script

pre-start script
	. $CONFIG
	touch $LOGFILE
	echo "`date` $UPSTART_JOB started" >> $LOGFILE
end script

post-stop script
	. $CONFIG
	touch $LOGFILE
	echo "`date` $UPSTART_JOB stoppped" >> $LOGFILE
end script
